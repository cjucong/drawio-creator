# DrawIO Creator 插件

这个 Obsidian 插件允许你直接在 Markdown 编辑器中创建和编辑 DrawIO 图表。

## 特点

- 在 Markdown 编辑器中右键菜单添加 "创建DrawIO图表" 选项
- 自动创建 SVG 或 PNG 格式的 DrawIO 文件（可自定义）
- 使用外部 DrawIO 程序进行编辑（可自定义路径）
- 文件自动保存在指定文件夹中（默认为 `附件/drawio`，可自定义）
- 自动以时间戳命名文件，避免冲突
- 使用模板文件创建新图表，可自定义模板
- 编辑完成后自动在当前光标位置插入图表链接（使用相对路径）
- 提供设置页面，方便自定义各项参数

## 安装方法

1. 在 Obsidian 的 `.obsidian/plugins` 目录下创建 `drawio-creator` 文件夹
2. 将此仓库中的文件复制到该文件夹
3. 重启 Obsidian 或者刷新插件
4. 在设置中启用 "DrawIO Creator" 插件

## 使用方法

1. 在 Markdown 编辑器中点击右键
2. 选择 "创建DrawIO图表" 选项
3. 外部 DrawIO 程序将会自动打开
4. 在 DrawIO 中编辑并保存图表
5. 返回 Obsidian，图表链接已自动插入到光标位置

## 配置

通过插件设置页面，你可以自定义以下选项：

1. **DrawIO 程序路径** - 设置DrawIO程序的完整路径（默认为 `E:\Software\Drawio\draw.io\draw.io.exe`）
2. **保存文件夹路径** - 设置DrawIO文件保存的文件夹路径（默认为 `附件/drawio`）
3. **文件格式** - 选择保存的文件格式（SVG 或 PNG）
4. **模板文件路径** - 设置用于创建新图表的模板文件路径（默认为 `附件/drawio/空模板.svg`）
5. **图片宽度** - 设置插入Markdown时的图片默认宽度（像素）

## 模板文件

插件会自动创建一个默认的空白模板文件，位于 `附件/drawio/空模板.svg`。你可以通过以下步骤自定义模板：

1. 使用 DrawIO 创建一个新图表，添加你想要的预设元素、样式或布局
2. 保存为 SVG 格式
3. 将文件复制到你想要的位置（例如 `附件/drawio/我的模板.svg`）
4. 在插件设置中更新"模板文件路径"为你的自定义模板

自定义模板可以包含预设的：
- 画布大小和背景
- 常用形状和连接线
- 公司标志或水印
- 预定义的颜色和样式

## 注意事项

- 此插件需要在系统中已安装 DrawIO 桌面版
- 确保 Obsidian 有足够的权限调用外部程序
- 如果遇到模板文件问题，可以删除现有模板，插件会自动创建新的默认模板

## 反馈与贡献

欢迎提出问题和建议，或者通过 Pull Request 贡献代码。 